type: grid
cards:
  - type: custom:mushroom-chips-card
    chips:
      - type: template
        icon: ""
        icon_color: ""
        content: LD2450
        picture: ""
        tap_action:
          action: none
        hold_action:
          action: none
        double_tap_action:
          action: none
    card_mod:
      style: |
        {% set top = 10 %}
        {% include 'chip_title.jinja' %}
    layout_options:
      grid_columns: 8
      grid_rows: auto
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        secondary: ""
        badge_icon: ""
        tap_action:
          action: none
        icon_color: blue
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        icon: mdi:radar
        primary: LD2450
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_any_presence
            icon: |-
              {% if is_state(config.entity, 'on')%} mdi:run
              {% else %} mdi:motion-sensor-off
              {% endif %}
            icon_color: |-
              {% if is_state(config.entity, 'on')%} 1
              {% else %} disabled
              {% endif %}
          - type: template
            entity: sensor.ld2450_new_all_target_counts
            content: "{{states(config.entity)}}"
            icon: mdi:human
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
        alignment: start
        card_mod:
          style: |
            {% set top = 8 %} 
            {% set font_weight = 400 %}
            {% set font_size = 14 %}
            {% set chip_height = 45 %}
             {% include 'chip_secondary_shape.jinja' %}
    grid_options:
      columns: 12
      rows: auto
    card_mod:
      style: |
        {% set entity = 'binary_sensor.ld2450_new_any_presence' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: custom:plotly-graph
    refresh_interval: 2
    hours_to_show: current_day
    ha_theme: true
    layout:
      legend:
        "y": 8000
        orientation: h
      autosize: true
      margin:
        autoexpand: true
        l: 50
        r: 20
        t: 20
        b: 40
      showlegend: true
      xaxis:
        dtick: 1000
        gridcolor: RGBA(200,200,200,0.15)
        zerolinecolor: RGBA(200,200,200,0.15)
        type: number
        fixedrange: true
        range:
          - -4000
          - 4000
      yaxis:
        dtick: 1000
        gridcolor: RGBA(200,200,200,0.15)
        zerolinecolor: RGBA(200,200,200,0.15)
        scaleanchor: x
        scaleratio: 1
        fixedrange: true
        range:
          - 8000
          - 0
    entities:
      - entity: ""
        name: Цель 1
        show_value: true
        unit_of_measurement: мм
        marker:
          size: 12
        line:
          shape: spline
          width: 5
        x:
          - $ex hass.states["sensor.ld2450_new_target1_x"].state
        "y":
          - $ex hass.states["sensor.ld2450_new_target1_y"].state
      - entity: ""
        name: Цель 2
        show_value: true
        unit_of_measurement: мм
        marker:
          size: 12
        line:
          shape: spline
          width: 5
        x:
          - $ex hass.states["sensor.ld2450_new_target2_x"].state
        "y":
          - $ex hass.states["sensor.ld2450_new_target2_y"].state
      - entity: ""
        name: Цель 3
        show_value: true
        unit_of_measurement: мм
        marker:
          size: 12
        line:
          shape: spline
          width: 5
        x:
          - $ex hass.states["sensor.ld2450_new_target3_x"].state
        "y":
          - $ex hass.states["sensor.ld2450_new_target3_y"].state
      - entity: ""
        name: Зона 1
        mode: lines
        fill: toself
        fillcolor: >-
          $ex hass.states["binary_sensor.ld2450_new_zone1_presence"].state ==
          "on" ? "RGBA(0,250,0,0.4)" : "RGBA(0,250,0,0.1)"
        line:
          color: RGBA(0,250,0,0.9)
          width: 2
        x:
          - $ex hass.states["number.ld2450_new_zone1_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone1_x_end"].state
          - $ex hass.states["number.ld2450_new_zone1_x_end"].state
          - $ex hass.states["number.ld2450_new_zone1_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone1_x_begin"].state
        "y":
          - $ex hass.states["number.ld2450_new_zone1_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone1_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone1_y_end"].state
          - $ex hass.states["number.ld2450_new_zone1_y_end"].state
          - $ex hass.states["number.ld2450_new_zone1_y_begin"].state
      - entity: ""
        name: Зона 2
        mode: lines
        fill: toself
        fillcolor: >-
          $ex hass.states["binary_sensor.ld2450_new_zone2_presence"].state ==
          "on" ? "RGBA(250,110,0,0.4)" : "RGBA(250,110,0,0.1)"
        line:
          color: RGBA(250,110,0,0.9)
          width: 2
        x:
          - $ex hass.states["number.ld2450_new_zone2_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone2_x_end"].state
          - $ex hass.states["number.ld2450_new_zone2_x_end"].state
          - $ex hass.states["number.ld2450_new_zone2_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone2_x_begin"].state
        "y":
          - $ex hass.states["number.ld2450_new_zone2_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone2_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone2_y_end"].state
          - $ex hass.states["number.ld2450_new_zone2_y_end"].state
          - $ex hass.states["number.ld2450_new_zone2_y_begin"].state
      - entity: ""
        name: Зона 3
        mode: lines
        fill: toself
        fillcolor: >-
          $ex hass.states["binary_sensor.ld2450_new_zone3_presence"].state ==
          "on" ? "RGBA(0,0,250,0.4)" : "RGBA(0,0,250,0.1)"
        line:
          color: RGBA(0,0,250,0.9)
          width: 2
        x:
          - $ex hass.states["number.ld2450_new_zone3_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone3_x_end"].state
          - $ex hass.states["number.ld2450_new_zone3_x_end"].state
          - $ex hass.states["number.ld2450_new_zone3_x_begin"].state
          - $ex hass.states["number.ld2450_new_zone3_x_begin"].state
        "y":
          - $ex hass.states["number.ld2450_new_zone3_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone3_y_begin"].state
          - $ex hass.states["number.ld2450_new_zone3_y_end"].state
          - $ex hass.states["number.ld2450_new_zone3_y_end"].state
          - $ex hass.states["number.ld2450_new_zone3_y_begin"].state
      - entity: ""
        name: Исключение 1
        mode: lines
        fill: toself
        fillcolor: >-
          $ex hass.states["switch.ld2450_new_zout1_enable"].state == "on" ?
          (hass.states["binary_sensor.ld2450_new_zout1_presence"].state == "on"
          ? "RGBA(250,0,0,0.4)" : "RGBA(250,0,0,0.2)") : "RGBA(0,0,0,0)"
        line:
          color: >-
            $ex hass.states["switch.ld2450_new_zout1_enable"].state == "on" ?
            "RGBA(150,0,0,0.9)" : "RGBA(0,0,0,0)"
          width: 3
          dash: dash
        x:
          - $ex hass.states["number.ld2450_new_zout1_x_begin"].state
          - $ex hass.states["number.ld2450_new_zout1_x_end"].state
          - $ex hass.states["number.ld2450_new_zout1_x_end"].state
          - $ex hass.states["number.ld2450_new_zout1_x_begin"].state
          - $ex hass.states["number.ld2450_new_zout1_x_begin"].state
        "y":
          - $ex hass.states["number.ld2450_new_zout1_y_begin"].state
          - $ex hass.states["number.ld2450_new_zout1_y_begin"].state
          - $ex hass.states["number.ld2450_new_zout1_y_end"].state
          - $ex hass.states["number.ld2450_new_zout1_y_end"].state
          - $ex hass.states["number.ld2450_new_zout1_y_begin"].state
      - entity: ""
        name: Зона покрытия
        mode: lines
        line:
          width: 1
          color: rgba(100, 100, 100, 0.6)
          dash: dot
        x:
          - 0
          - 1000
          - 3700
          - 3500
          - 2000
          - 0
          - -2000
          - -3500
          - -3700
          - -1000
          - 0
        "y":
          - 0
          - 500
          - 3700
          - 6000
          - 7400
          - 8000
          - 7400
          - 6000
          - 3700
          - 500
          - 0
    raw_plotly_config: true
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        primary: ""
        secondary: ""
        icon: mdi:radar
        badge_icon: ""
        tap_action:
          action: none
        entity: binary_sensor.ld2450_new_zone1_presence
        icon_color: |-
          {% if is_state(config.entity, 'on') %} green
          {% else %} disabled
          {% endif %}
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-template-card
        primary: Зона 1
        icon: ""
        badge_icon: ""
        tap_action:
          action: more-info
        entity: binary_sensor.ld2450_new_zone1_presence
        icon_color: ""
        layout: horizontal
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        secondary:  
        card_mod:
          style:
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_zone1_presence
            content: "{% include 'last_changed_calc.jinja' %}"
        alignment: start
        card_mod:
          style: |
            {% include 'scroll_secondary_ha_card_chip_container.jinja' %}
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            icon: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} mdi:alert-circle

              {% else %} 
              mdi:numeric-{{states('sensor.ld2450_new_zone1_target_counts')}}-circle

              {% endif %}
            icon_color: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} red

              {% else %} {% if
              states('sensor.ld2450_new_zone1_target_counts')|int > 0 %}green{%
              else %} disabled{%endif%}

              {% endif %}
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: light.torsher_mono
        alignment: end
        card_mod:
          style: |
            {% include 'thirdary_chip_ha_card.jinja' %}
    grid_options:
      columns: 3
      rows: auto
    card_mod:
      style: |
        {% set entity = 'binary_sensor.ld2450_new_zone1_presence' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        primary: ""
        secondary: ""
        icon: mdi:radar
        badge_icon: ""
        tap_action:
          action: none
        entity: binary_sensor.ld2450_new_zone2_presence
        icon_color: |-
          {% if is_state(config.entity, 'on') %} orange
          {% else %} disabled
          {% endif %}
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-template-card
        primary: Зона 2
        icon: ""
        badge_icon: ""
        tap_action:
          action: more-info
        entity: binary_sensor.ld2450_new_zone2_presence
        icon_color: ""
        layout: horizontal
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        secondary:  
        card_mod:
          style:
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_zone2_presence
            content: "{% include 'last_changed_calc.jinja' %}"
        alignment: start
        card_mod:
          style: |
            {% include 'scroll_secondary_ha_card_chip_container.jinja' %}
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            icon: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} mdi:alert-circle

              {% else %} 
              mdi:numeric-{{states('sensor.ld2450_new_zone2_target_counts')}}-circle

              {% endif %}
            icon_color: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} red

              {% else %} {% if
              states('sensor.ld2450_new_zone2_target_counts')|int > 0 %}orange{%
              else %} disabled{%endif%}

              {% endif %}
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_zone2_presence
        alignment: end
        card_mod:
          style: |
            {% include 'thirdary_chip_ha_card.jinja' %}
    grid_options:
      columns: 3
      rows: auto
    card_mod:
      style: |
        {% set entity = 'binary_sensor.ld2450_new_zone2_presence' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        primary: ""
        secondary: ""
        icon: mdi:radar
        badge_icon: ""
        tap_action:
          action: none
        entity: binary_sensor.ld2450_new_zone3_presence
        icon_color: |-
          {% if is_state(config.entity, 'on') %} 0,0,255
          {% else %} disabled
          {% endif %}
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-template-card
        primary: Зона 3
        icon: ""
        badge_icon: ""
        tap_action:
          action: more-info
        entity: binary_sensor.ld2450_new_zone3_presence
        icon_color: ""
        layout: horizontal
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        secondary:  
        card_mod:
          style:
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_zone3_presence
            content: "{% include 'last_changed_calc.jinja' %}"
        alignment: start
        card_mod:
          style: |
            {% include 'scroll_secondary_ha_card_chip_container.jinja' %}
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            icon: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} mdi:alert-circle

              {% else %} 
              mdi:numeric-{{states('sensor.ld2450_new_zone3_target_counts')}}-circle

              {% endif %}
            icon_color: >-
              {% if states(config.entity) in ['unknown', 'unavailable', 'none'] 
              %} red

              {% else %} {% if
              states('sensor.ld2450_new_zone3_target_counts')|int > 0
              %}0,0,255{% else %} disabled{%endif%}

              {% endif %}
            tap_action:
              action: none
            hold_action:
              action: none
            double_tap_action:
              action: none
            entity: binary_sensor.ld2450_new_zone3_presence
        alignment: end
        card_mod:
          style: |
            {% include 'thirdary_chip_ha_card.jinja' %}
    grid_options:
      columns: 3
      rows: auto
    card_mod:
      style: |
        {% set entity = 'binary_sensor.ld2450_new_zone3_presence' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        secondary: ""
        badge_icon: ""
        tap_action:
          action: none
        icon_color: blue
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        icon: mdi:radar
        primary: Цель 1
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}º"
            entity: sensor.ld2450_new_target1_angle
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target1_direction
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target1_position
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target1_resolution
            icon: mdi:arrow-left-right
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}} м/с"
            entity: sensor.ld2450_new_target1_speed
            icon: mdi:speedometer
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target1_x
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target1_y
            icon: "{{state_attr(config.entity, 'icon')}}"
        alignment: start
        card_mod:
          style: |
            {% set top = 8 %} 
            {% set font_weight = 400 %}
            {% set font_size = 14 %}
            {% set chip_height = 45 %}
             {% include 'chip_secondary_shape.jinja' %}
    grid_options:
      columns: 12
      rows: auto
    card_mod:
      style: |
        {% set entity = '' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
    visibility:
      - condition: state
        entity: sensor.ld2450_new_target1_direction
        state_not: None
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        secondary: ""
        badge_icon: ""
        tap_action:
          action: none
        icon_color: blue
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        icon: mdi:radar
        primary: Цель 2
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}º"
            entity: sensor.ld2450_new_target2_angle
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target2_direction
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target2_position
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target2_resolution
            icon: mdi:arrow-left-right
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}} м/с"
            entity: sensor.ld2450_new_target2_speed
            icon: mdi:speedometer
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target2_x
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target2_y
            icon: "{{state_attr(config.entity, 'icon')}}"
        alignment: start
        card_mod:
          style: |
            {% set top = 8 %} 
            {% set font_weight = 400 %}
            {% set font_size = 14 %}
            {% set chip_height = 45 %}
             {% include 'chip_secondary_shape.jinja' %}
    grid_options:
      columns: 12
      rows: auto
    visibility:
      - condition: state
        entity: sensor.ld2450_new_target2_direction
        state_not: None
    card_mod:
      style: |
        {% set entity = '' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: custom:vertical-stack-in-card
    cards:
      - type: custom:mushroom-template-card
        secondary: ""
        badge_icon: ""
        tap_action:
          action: none
        icon_color: blue
        double_tap_action:
          action: none
        badge_color: ""
        fill_container: true
        picture: ""
        hold_action:
          action: none
        layout: horizontal
        icon: mdi:radar
        primary: Цель 3
        card_mod:
          style:
            mushroom-shape-icon$: |
              {% include 'mushroom_icon_shape.jinja' %} 
            .: |
              {% include 'mushroom_ha_card_transparent.jinja' %} 
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}º"
            entity: sensor.ld2450_new_target3_angle
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target3_direction
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}"
            entity: sensor.ld2450_new_target3_position
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target3_resolution
            icon: mdi:arrow-left-right
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}} м/с"
            entity: sensor.ld2450_new_target3_speed
            icon: mdi:speedometer
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target3_x
            icon: "{{state_attr(config.entity, 'icon')}}"
          - type: template
            tap_action:
              action: more-info
            hold_action:
              action: none
            double_tap_action:
              action: none
            content: "{{states(config.entity)}}мм"
            entity: sensor.ld2450_new_target3_y
            icon: "{{state_attr(config.entity, 'icon')}}"
        alignment: start
        card_mod:
          style: |
            {% set top = 8 %} 
            {% set font_weight = 400 %}
            {% set font_size = 14 %}
            {% set chip_height = 45 %}
             {% include 'chip_secondary_shape.jinja' %}
    grid_options:
      columns: 12
      rows: auto
    visibility:
      - condition: state
        entity: sensor.ld2450_new_target3_direction
        state_not: None
    card_mod:
      style: |
        {% set entity = '' %}
        {% set state_on = 'on' %}
        {% set hover = true %}

        {% include 'stack_card.jinja'%}
  - type: vertical-stack
    cards:
      - type: custom:button-card
        name: null
        styles:
          card:
            - height: 100px
            - background: transparent
            - border: none
        action: none
      - type: custom:mushroom-chips-card
        chips:
          - type: back
            card_mod:
              style:
                .: |
                  {% set hover = 'true' %}
                  {% set stating = 'false' %}
                  {% include 'chip_settings_style.jinja' %}
          - type: menu
            card_mod:
              style:
                .: |
                  {% set hover = 'true' %}
                  {% set stating = 'false' %}
                  {% include 'chip_settings_style.jinja' %}
        alignment: center
        card_mod:
          style:
            mushroom-template-chip:nth-child(1)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(2)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(3)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(4)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(5)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            mushroom-template-chip:nth-child(6)$: |
              {% set opacity = 0.3 %}
              {% include 'shadow_chip_icon.jinja' %}
            .: |

              {% set max_width =150 %}
              {% set chip_height = 40 %}
              {% set chip_padding = 5 %}
              {% set icon_size = 30 %}
              {% set chip_spacing = 20 %}
              {% include 'fixed_bottom_bar.jinja' %}
